<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teste Bot√£o Flutuante - BuscaLogo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f0f0f0;
    }
    .test-content {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .debug-info {
      background: #e8f5e8;
      border: 1px solid #4CAF50;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
      font-family: monospace;
    }
    .debug-error {
      background: #ffebee;
      border: 1px solid #f44336;
      color: #c62828;
    }
    button {
      background: #2196F3;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px 5px;
    }
    button:hover {
      background: #1976D2;
    }
  </style>
</head>
<body>
  <div class="test-content">
    <h1>üß™ Teste do Bot√£o Flutuante - BuscaLogo</h1>
    
    <p>Esta p√°gina √© para testar se o bot√£o flutuante de captura est√° funcionando corretamente.</p>
    
    <div class="debug-info" id="debugInfo">
      <strong>Status:</strong> Carregando...
    </div>
    
    <div>
      <button onclick="checkExtension()">üîç Verificar Extens√£o</button>
      <button onclick="forceShowButton()">üéØ For√ßar Exibi√ß√£o</button>
      <button onclick="checkConsole()">üìã Ver Console</button>
      <button onclick="reloadPage()">üîÑ Recarregar</button>
    </div>
    
    <h2>Instru√ß√µes de Teste:</h2>
    <ol>
      <li>Abra o Console do navegador (F12)</li>
      <li>Recarregue a p√°gina</li>
      <li>Verifique se h√° mensagens do BuscaLogo</li>
      <li>Clique nos bot√µes de teste acima</li>
      <li>Procure pelo bot√£o flutuante no canto superior direito</li>
    </ol>
    
    <h2>Debug Info:</h2>
    <div id="debugDetails">
      <p><strong>URL:</strong> <span id="currentUrl">-</span></p>
      <p><strong>Chrome Runtime:</strong> <span id="chromeRuntime">-</span></p>
      <p><strong>Content Script:</strong> <span id="contentScript">-</span></p>
      <p><strong>Floating Button:</strong> <span id="floatingButton">-</span></p>
      <p><strong>CSS Loaded:</strong> <span id="cssLoaded">-</span></p>
      <p><strong>JS Loaded:</strong> <span id="jsLoaded">-</span></p>
    </div>
  </div>

  <script>
    // Fun√ß√£o para atualizar informa√ß√µes de debug
    function updateDebugInfo() {
      document.getElementById('currentUrl').textContent = window.location.href;
      document.getElementById('chromeRuntime').textContent = typeof chrome !== 'undefined' && chrome.runtime ? '‚úÖ Dispon√≠vel' : '‚ùå N√£o dispon√≠vel';
      document.getElementById('contentScript').textContent = 'Verificando...';
      document.getElementById('floatingButton').textContent = 'Verificando...';
      document.getElementById('cssLoaded').textContent = 'Verificando...';
      document.getElementById('jsLoaded').textContent = 'Verificando...';
      
      // Verifica se o content script est√° funcionando
      setTimeout(() => {
        const contentScriptWorking = document.querySelector('script[src*="content.js"]') || 
                                   document.querySelector('script[src*="floating-capture.js"]');
        document.getElementById('contentScript').textContent = contentScriptWorking ? '‚úÖ Carregado' : '‚ùå N√£o carregado';
      }, 1000);
      
      // Verifica se o bot√£o flutuante existe
      setTimeout(() => {
        const floatingButton = document.querySelector('.buscalogo-floating-capture');
        document.getElementById('floatingButton').textContent = floatingButton ? '‚úÖ Encontrado' : '‚ùå N√£o encontrado';
      }, 2000);
      
      // Verifica se o CSS foi carregado
      setTimeout(() => {
        const cssLoaded = document.querySelector('link[href*="floating-capture.css"]');
        document.getElementById('cssLoaded').textContent = cssLoaded ? '‚úÖ Carregado' : '‚ùå N√£o carregado';
      }, 1500);
      
      // Verifica se o JS foi carregado
      setTimeout(() => {
        const jsLoaded = document.querySelector('script[src*="floating-capture.js"]');
        document.getElementById('jsLoaded').textContent = jsLoaded ? '‚úÖ Carregado' : '‚ùå N√£o carregado';
      }, 1500);
    }
    
    // Fun√ß√£o para verificar a extens√£o
    function checkExtension() {
      const debugInfo = document.getElementById('debugInfo');
      
      if (typeof chrome !== 'undefined' && chrome.runtime) {
        debugInfo.className = 'debug-info';
        debugInfo.innerHTML = '<strong>Status:</strong> ‚úÖ Extens√£o Chrome detectada!';
        
        // Tenta enviar mensagem para a extens√£o
        chrome.runtime.sendMessage({ type: 'GET_STATUS' }, (response) => {
          if (chrome.runtime.lastError) {
            debugInfo.innerHTML += '<br><strong>Erro:</strong> ' + chrome.runtime.lastError.message;
          } else if (response && response.success) {
            debugInfo.innerHTML += '<br><strong>Background:</strong> ‚úÖ Respondendo';
          } else {
            debugInfo.innerHTML += '<br><strong>Background:</strong> ‚ùå N√£o respondeu';
          }
        });
      } else {
        debugInfo.className = 'debug-info debug-error';
        debugInfo.innerHTML = '<strong>Status:</strong> ‚ùå Extens√£o Chrome n√£o detectada!';
      }
      
      updateDebugInfo();
    }
    
    // Fun√ß√£o para for√ßar exibi√ß√£o do bot√£o
    function forceShowButton() {
      const debugInfo = document.getElementById('debugInfo');
      
      if (window.initBuscaLogoFloatingCapture) {
        try {
          const floatingCapture = window.initBuscaLogoFloatingCapture();
          if (floatingCapture && floatingCapture.show) {
            floatingCapture.show();
            debugInfo.className = 'debug-info';
            debugInfo.innerHTML = '<strong>Status:</strong> ‚úÖ Bot√£o for√ßado a aparecer!';
          } else {
            throw new Error('M√©todo show n√£o encontrado');
          }
        } catch (error) {
          debugInfo.className = 'debug-info debug-error';
          debugInfo.innerHTML = '<strong>Status:</strong> ‚ùå Erro ao for√ßar exibi√ß√£o: ' + error.message;
        }
      } else {
        debugInfo.className = 'debug-info debug-error';
        debugInfo.innerHTML = '<strong>Status:</strong> ‚ùå Fun√ß√£o de inicializa√ß√£o n√£o encontrada!';
      }
    }
    
    // Fun√ß√£o para verificar console
    function checkConsole() {
      const debugInfo = document.getElementById('debugInfo');
      debugInfo.className = 'debug-info';
      debugInfo.innerHTML = '<strong>Status:</strong> üìã Verifique o console do navegador (F12) para mensagens de debug do BuscaLogo';
    }
    
    // Fun√ß√£o para recarregar p√°gina
    function reloadPage() {
      window.location.reload();
    }
    
    // Inicializa√ß√£o
    document.addEventListener('DOMContentLoaded', () => {
      console.log('üß™ P√°gina de teste carregada');
      updateDebugInfo();
      
      // Verifica automaticamente ap√≥s 3 segundos
      setTimeout(checkExtension, 3000);
    });
    
    // Log de eventos importantes
    window.addEventListener('load', () => {
      console.log('üß™ P√°gina completamente carregada');
    });
    
    // Intercepta erros
    window.addEventListener('error', (event) => {
      console.error('üß™ Erro capturado:', event.error);
    });
  </script>
</body>
</html>
